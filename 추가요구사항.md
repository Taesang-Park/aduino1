
📌 [요청 제목]

Kotlin(Android) 물 섭취 추적 앱 기능 추가 구현 요청

⸻

📌 [현재 앱 구조]
	•	아두이노 + 로드셀 + HX711 센서 → 무게 측정
	•	HC-05/06 Bluetooth Classic으로 Android 앱과 통신
	•	앱은 Jetpack Compose UI
	•	MVVM + Clean Architecture 적용
	•	Room DB로 섭취 기록 저장
	•	데이터:
	•	W: 현재 무게
	•	D: 감지된 섭취량(ml)

⸻

📌 [새로 추가할 기능 요구사항]

아래 기능들이 앱에 추가되어야 합니다.

⸻

🔥 1. “시간 간격 기반 수분 섭취 목표 시스템” 구현

✔ 사용자가 설정할 수 있어야 함:
	•	하루 총 목표 섭취량 (예: 2000ml)
	•	“몇 시간마다 마실지” 선택 (예: 1시간/2시간/3시간/사용자 설정)

✔ 앱은 자동으로 다음을 계산:

timesPerDay = 16시간(깨어있는 시간) / 선택한 간격
goalPerInterval = dailyGoal / timesPerDay

예:
	•	하루 2L
	•	2시간마다
	•	16시간 활동 기준
→ 8회
→ 회당 250ml

✔ 각 시간 구간(interval)에서:
	•	섭취한 양 누적
	•	목표 대비 현재 비율 계산
	•	구간이 끝나면 자동 초기화 후 다음 구간으로 이동

⸻

🔥 2. RGB LED 상태 전송 기능(아두이노로)

앱은 현재 시간 구간의 섭취량에 따라 LED 색상 명령을 아두이노로 전달해야 함.

✔ 기준:

달성 비율	의미	LED 색상	아두이노 명령
0–50%	부족	🔴 Red	C:0
50–100%	보통	🟡 Yellow	C:1
100%↑	충분	🔵 Blue	C:2

앱은 이 값을 자동으로 계산하여 Bluetooth로 전송.

⸻

🔥 3. 물 섭취 로그 기능 개선

✔ 자동 기록 (기존 D:값) 저장

✔ 잘못 측정된 기록 삭제 기능 추가

✔ 수동 추가(Add Water Intake) 기능 추가

✔ 히스토리 화면 작성 (List 형태)

⸻

🔥 4. 그래프(Statistics) 화면 추가

아래 그래프 UI를 Compose로 작성:

✔ 오늘 섭취량 시간대별 그래프 (Bar chart)

✔ 하루 총 섭취량 표시

✔ 시간 구간 목표 vs 실제 섭취량 그래프

(예시: 8개 구간 중 3개 구간은 달성)

⸻

🔥 5. 기본 로직 유지
	•	하루 총 섭취량 계산 기능은 유지
	•	기존 BluetoothManager, Repository, Room 구조 활용
	•	W/D 실시간 값은 그대로 받아서 처리

⸻

🔥 6. 필요한 코드 작성 요청

클로드에게 다음 구현을 요청할 수 있음:

✔ ViewModel 로직
	•	시간 구간 계산
	•	목표량 계산
	•	섭취량 누적
	•	LED 상태 판단
	•	아두이노 명령 전송 코드

✔ Repository & UseCase
	•	기록 추가/삭제
	•	시간 구간별 데이터 처리

✔ UI
	•	설정 화면 (목표 / 시간 간격 설정)
	•	히스토리 로그 화면
	•	통계 그래프 화면
	•	Interval 상태 표시 UI
	•	목표
	•	현재 섭취
	•	남은 시간
	•	다음 구간 시작까지 타이머

✔ BluetoothManager
	•	C:0, C:1, C:2 전송 기능 추가

⸻

🔥 7. 필요한 클래스/함수 세트

클로드에게 아래 클래스들을 만들어달라고 요청하면 됨:
	•	HydrationIntervalCalculator.kt
	•	HydrationViewModel.kt
	•	HydrationRepository.kt
	•	HydrationSettingsScreen.kt
	•	HydrationHistoryScreen.kt
	•	HydrationStatisticsScreen.kt
	•	BluetoothCommandSender.kt (C:명령 전송)